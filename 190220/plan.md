# Процедурное программирование, абстракция кода [01:30]
## Процедуры, параметры, возвращаемое значение [00:20]
* Процедуры как куски кода с параметрами
  * Эволюция от goto
  * Добавление параметров, абстракция кода
  * Возвращаемое значение
  * Python: возврат многих значений через кортеж
  * Python: параметры по умолчанию, грабли со списками (грабли тяжело пошли)
  * Python: позиционные и именованные параметры, строго именованные параметры
  * Python: распаковка/запаковка параметров
* О чём подумать:
  * Насколько это логически единый кусок?
    * Будут ли менять вызывающий код согласованно в 100% случаев?
  * Сколько кода экономит?
  * Какие решения принимает за пользователя?
    * Зависимости от глобальных переменных
    * Какие процедуры вызывать дальше
  * Насколько часто будет использоваться?
  * Насколько страшно, если баг в этой процедуре расползётся по всему коду?
## Пример рефакторинга [00:25]
## Тестируемый код и пример рефакторинга [00:45]
* Стандартная конвенция для параметров командной строки
* Возвращаемое значение приложения
* Разделение ввода-вывода!
* Зависимости
* Отделение представления
* Отделение стадий обработки

# Pytest: fixtures [00:15]
## Pytest: capsys [00:05]
## Pytest: tmpdir [00:10]

# Расширенный Python  [01:15]
## Лямбды и функции высшего порядка [00:05]
* Есть `map`, `filter`
* `def` - это создание новой функции, просто переменная
  * Почти: ещё есть `__name__` и `__doc__`
* Аналогично можно с `lambda`
## Декораторы [00:15]
* Пример использования: `functools.lru_cache`
* Пример написания
  * Логирование
  * `functools.wraps`
  * Логирование количества вызовов
* Прочие применения:
  * https://habr.com/ru/post/236689/
  * Проверка прав доступа в сервере
## Замыкания и области видимости [00:40]
* Доступ к нелокальным переменным (замыкание)
* Изменение нелокальных переменных:
  * Лексическая область видимости (lexical scoping), как в Pascal, JavaScript
  * Бывает ещё динамическая: Lisp, LaTeX, Perl, bash
  * Ссылки:
    * https://foxford.ru/wiki/informatika/oblasti-vidimosti-peremennyh-v-python
    * https://www.python.org/dev/peps/pep-3104/
  * Каждая переменная либо "объявлена" в функции, либо нет
  * Имя статически связывается с ближайшей объявленной переменной с таким именем
  * Можно изменить связывание через `global`, `nonlocal`
* Создание замыканий в цикле
## Исключения [00:15]
* Один из способов сообщать об ошибках; бывают другие
* Ошибка вылетела, можно поймать
* В Python есть стандартная классификация того, какие ошибки бывают и как они выглядят
* Исключения летят сквозь стэк
* Исключения - только для исключительных ситуаций, потому что их всегда забывают обрабатывать
## Прочее
* Классный курс по Python: https://compscicenter.ru/courses/python/2015-autumn/classes/
